---
title:  Tool
date: 2025-10-31 12:30:00 +0800
categories: [ Notepad, Linux ]
tags: [ Linux ]
---

# Linux 常用工具

## ssh

`ssh`命令用于通过`SSH`协议连接到远程主机，实现远程登录和执行命令

### 配置ssh

```bash
sudo apt-get install -y ssh
```
{: file='安装ssh'}

```bash
ssh-keygen -t rsa -b 4096 -C "emial@examle.com"
```
{: file='生成ssh key'}

`""`内为邮箱地址，运行成功后会在`~/.ssh`中生成`id_rsa`和`id_rsa.pub`文件

- -t: 指定算法，包括`dsa` `ecdsa` `ecdsa-sk`,`ed25519` `ed25519-sk` `rsa`（推荐用 ed25519）
- -b: 指定密钥长度。对 `ed25519` 不需要 -b  

密钥默认保存在 ~/.ssh/id_rsa（私钥）和 ~/.ssh/id_rsa.pub（公钥）

```bash
ssh-add ~/.ssh/id_rsa
```
{: file='添加到ssh代理'}

添加到`ssh代理`后，`ssh`相关操作及可实现免密

```bash
ssh-add -l
```
{: file='查看相应的ssh密钥是否被加载'}

```bash
ssh-copy-id -i ~/.ssh/id_rsa.pub user@remote-host
```
{: file='把公钥复制到远程主机'}

如果 `ssh-copy-id` 不可用，可以手动追加公钥到远程 `~/.ssh/authorized_keys`

### 远程连接

```bash
ssh [options] [user]@[hostname] [command]
```
{: file='基本语法'}

参数说明
- [options]
  - `-l` 指定登录的用户
  - `-p` 指定连接到远程主机的端口号，默认22
  - `-v` 显示调试信息
  - `-X` 启用X11转发
- [user] 远程主机的用户名
- [hostname]远程主机的主机名或IP地址
- [command] 在远程主机上执行的命令

## scp

`scp`基于`ssh`，用于在本地与远端之间复制文件或目录

```bash
scp [options] [source] [user@hostname]:[target]
```
{: file='基本语法'}

参数说明
- [options]
  - `-r` 递归复制整个目录
  - `-P` 指定远程主机的端口号，默认22
  - `-p` 保留文件的修改时间、访问时间和权限
  - `-v` 显示的调试信息
  - `-C` 启用压缩
  - `-l` 限定使用的带宽，以`Kbit`为单位
- [source] 复制的文件
- [user] 远程主机的用户名
- [hostname] 远程主机的主机名或IP地址
- [target] 远程主机的路径

```bash
scp /path/to/localfile user@remote:/path/to/dest/
```
{: file='将本地文件复制到远程'}

```bash
scp user@remote:/path/to/remotefile /local/dest/
```
{: file='从远程复制到本地'}

```bash
scp -r -P 7897 project_dir user@remote:/home/user/
```
{: file='递归复制目录，指定端口 7897'}

## screen

`screen`用于多重视窗管理程序，能都在一个终端窗口中创建多个虚拟终端会话，并且在`ssh`断开连接或关闭终端后保持会话继续运行

```bash
sudo apt-get install -y screen
```
{: file='安装screen'}

### 启动会话

```bash
screen
```
{: file='启动新的screen会话（自动生成名称）'}

```bash
screen -S session_name
```
{: file='启动终端名字为session_name的screen会话'}

常用快捷键  
- `ctrl`+`a`+`c` 创建一个新的`screen`窗口
- `ctrl`+`a`+`n` 切换到下一个`screen`窗口
- `ctrl`+`a`+`p` 切换到上一个`screen`窗口
- `ctrl`+`a` 列出所有的`screen`窗口
- `ctrl`+`a`+`d` 分离当前的`screen`会话

### 重连会话

```bash
screen -ls
```
{: file='列出所有正在运行的会话'}

```bash
screen -r session_name
```
{: file='重连到名字为session_name的会话'}

```bash
screen -r -d session_name
```
{: file='强制重连到名字为session_name的会话'}

```bash
screen -x session_name
```
{: file='共享会话'}

## shc

shc 是一个用于加密 shell 脚本的工具，它可以将脚本转换为二进制可执行文件，以保护脚本内容不被轻易查看

```bash
sudo apt-get install shc
```

```bash
[variables] shc [options] script
```
{: file='基本语法'}

参数说明
- [options]
  - -f 指定要加密的脚本文件名。必须提供
  - -v 详细模式，输出更多的编译信息
  - -r 放松安全限制，生成的二进制文件可以在相同操作系统的不同版本上执行
  - -e 设置脚本的过期日期，格式为 `dd/mm/yyyy`
  - -m 设置脚本过期时显示的消息
  - -o 指定输出的二进制文件名
  - -z 压缩生成的二进制文件，减小体积
  - -d 生成调试版本，包含更多错误信息
  - -S 打开 `setuid`（使生成程序可被 `root` 以 `setuid` 方式调用）。默认关闭 **谨慎使用**
  - -U 生成不可跟踪的二进制，尝试阻止 `strace` / `ptrace` / `truss` 等工具跟踪进程
- [variables]
  - CC 指定 `C` 编译器（默认 `gcc`）
  - CFLAGS 传递给编译器的标志，如优化级别或调试信息
  - LDFLAGS 链接器标志，如静态链接所需标志

```bash
shc -f script.sh
```
{: file='最简单生成'}

```bash
shc -r -f script.sh
```
{: file='跨系统生成'}

```bash
shc -f script.sh -o myprog -v
```
{: file='指定输出、启用 verbose'}

```bash
CC=gcc CFLAGS="-O2 -pipe" LDFLAGS="-static" shc -f script.sh -o script_static
```
{: file='使用自定义编译器与静态链接'}

## wine

`Wine` 是一个能够在多种 `POSIX-compliant` 操作系统（诸如 `Linux`，`macOS` 及 `BSD` 等）上运行 `Windows` 应用的兼容层

### 安装

```bash
sudo mkdir -pm755 /etc/apt/keyrings
wget -O - https://dl.winehq.org/wine-builds/winehq.key | sudo gpg --dearmor -o /etc/apt/keyrings/winehq-archive.key -
```
{: file='下载并添加存储库密钥'}

```bash
sudo dpkg --add-architecture i386
```
{: file='启用 32 位存储库'}

```bash
sudo wget -NP /etc/apt/sources.list.d/ https://dl.winehq.org/wine-builds/ubuntu/dists/$(lsb_release -c | awk '{print $2}')/winehq-$(lsb_release -c | awk '{print $2}').sources
```
{: file='添加源文件'}

```bash
sudo apt update
sudo apt install --install-recommends winehq-stable
```
{: file='安装 Wine'}

### 配置

```bash
sudo apt install winetricks
```
{: file='安装 winetricks'}

#### 补全缺失字体

```bash
winetricks allfonts corefonts cjkfonts
wineboot --update
```
{: file='补全缺失字体'}